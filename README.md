# Racing Equipment Configuration System

èµ›è½¦æ‰‹è£…å¤‡é…ç½®ç³»ç»Ÿ - ä¸€ä¸ªåŸºäºReact + TypeScriptçš„å¯è§†åŒ–è£…å¤‡ç®¡ç†åº”ç”¨

## ğŸ¯ é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåƒç´ é£æ ¼çš„èµ›è½¦æ‰‹è£…å¤‡é…ç½®ç³»ç»Ÿï¼Œå…è®¸ç”¨æˆ·é€šè¿‡å¯è§†åŒ–ç•Œé¢ä¸ºèµ›è½¦æ‰‹é…ç½®è£…å¤‡ï¼ŒåŒ…æ‹¬å¤´ç›”ã€æŠ¤è‚‹ã€æ‰‹å¥—ç­‰10ä¸ªæ§½ä½çš„è£…å¤‡ç®¡ç†ã€‚

### æ ¸å¿ƒåŠŸèƒ½
- âœ… å¯è§†åŒ–è£…å¤‡æ§½ä½ç®¡ç†ï¼ˆ10ä¸ªæ§½ä½ï¼‰
- âœ… è£…å¤‡åº“ç½‘æ ¼å±•ç¤ºï¼ˆ16ä»¶è£…å¤‡ï¼‰
- âœ… è£…å¤‡å…¼å®¹æ€§æ£€æŸ¥å’Œé«˜äº®æç¤º
- âœ… ä¸‰ç§è£…é…æ–¹å¼ï¼šä¼ ç»Ÿç‚¹å‡»ã€åŒå‡»å¿«é€Ÿè£…é…ã€æ‹–æ‹½è£…é…
- âœ… æ‹–æ‹½è£…é…æ”¯æŒï¼ˆæ¡Œé¢+ç§»åŠ¨ç«¯ï¼‰
- âœ… è£…å¤‡è¯¦æƒ…å¡ç‰‡ï¼ˆhover/long-pressæ˜¾ç¤ºï¼‰
- âœ… è®¤è¯å¯¹æ¯”å’ŒPhase 2å­—æ®µå±•ç¤º
- âœ… localStorageæŒä¹…åŒ–
- âœ… å“åº”å¼è®¾è®¡ï¼ˆæ¡Œé¢/ç§»åŠ¨ç«¯ï¼‰
- âœ… å®æ—¶çŠ¶æ€ç»Ÿè®¡å’Œå®Œæ•´æ€§æŒ‡ç¤ºå™¨
- âœ… ä¸°å¯Œçš„è§†è§‰åé¦ˆï¼ˆé«˜äº®ã€ç¼©æ”¾ã€é˜´å½±ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 18.0.0
- npm >= 9.0.0

### å®‰è£…ä¾èµ–
```bash
npm install
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```
è®¿é—® http://localhost:5173/ æŸ¥çœ‹åº”ç”¨

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
```

### è¿è¡Œæµ‹è¯•
```bash
# å•å…ƒæµ‹è¯•
npm test

# E2Eæµ‹è¯•
npm run test:e2e

# E2Eæµ‹è¯• UIæ¨¡å¼
npm run test:e2e:ui
```

### ç±»å‹æ£€æŸ¥
```bash
npm run type-check
```

## ğŸ“– ä½¿ç”¨è¯´æ˜

### åŸºæœ¬æ“ä½œ

#### æ–¹å¼1: ä¼ ç»Ÿç‚¹å‡»è£…é…
1. **é€‰æ‹©è£…å¤‡**: å•å‡»å³ä¾§è£…å¤‡åº“ä¸­çš„è£…å¤‡å¡ç‰‡ï¼ˆæ˜¾ç¤ºè“è‰²è¾¹æ¡†ï¼‰
2. **æŸ¥çœ‹å…¼å®¹æ€§**: é€‰ä¸­è£…å¤‡åï¼Œå…¼å®¹æ§½ä½æ˜¾ç¤ºç»¿è‰²è¾¹æ¡†ï¼Œä¸å…¼å®¹æ§½ä½å˜ç°
3. **è£…é…è£…å¤‡**: å•å‡»å…¼å®¹çš„æ§½ä½ï¼Œè£…å¤‡å°†è¢«è£…é…
4. **å¸è½½è£…å¤‡**: å–æ¶ˆé€‰ä¸­è£…å¤‡åï¼Œç‚¹å‡»å·²è£…é…çš„æ§½ä½å¯å¸è½½

#### æ–¹å¼2: åŒå‡»å¿«é€Ÿè£…é… âš¡
1. **åŒå‡»è£…å¤‡**: åŒå‡»è£…å¤‡å¡ç‰‡ï¼Œè‡ªåŠ¨è£…é…åˆ°ç¬¬ä¸€ä¸ªå¯ç”¨çš„å…¼å®¹æ§½ä½
2. **å¿«é€Ÿæ“ä½œ**: æ— éœ€æ‰‹åŠ¨é€‰æ‹©æ§½ä½ï¼Œç³»ç»Ÿè‡ªåŠ¨åŒ¹é…

#### æ–¹å¼3: æ‹–æ‹½è£…é… ğŸ¯
1. **æ‹–åŠ¨è£…å¤‡**: æŒ‰ä½è£…å¤‡å¡ç‰‡å¹¶æ‹–åŠ¨åˆ°ç›®æ ‡æ§½ä½
2. **è§†è§‰åé¦ˆ**: æ‹–åŠ¨æ—¶è£…å¤‡åŠé€æ˜ï¼Œç›®æ ‡æ§½ä½æ˜¾ç¤ºé»„è‰²é«˜äº®
3. **é‡Šæ”¾è£…é…**: é‡Šæ”¾é¼ æ ‡å®Œæˆè£…é…
4. **ç§»åŠ¨ç«¯**: é•¿æŒ‰è£…å¤‡å¡ç‰‡å³å¯æ‹–åŠ¨

#### å…¶ä»–æ“ä½œ
- **é‡ç½®é…ç½®**: ç‚¹å‡»åº•éƒ¨StatusBarçš„ResetæŒ‰é’®æ¸…ç©ºæ‰€æœ‰è£…å¤‡
- **æŸ¥çœ‹è£…å¤‡è¯¦æƒ…**: 
  - æ¡Œé¢ç«¯ï¼šé¼ æ ‡æ‚¬åœåœ¨è£…å¤‡å¡ç‰‡ä¸Š200msåæ˜¾ç¤ºè¯¦æƒ…å¡ç‰‡
  - ç§»åŠ¨ç«¯ï¼šé•¿æŒ‰è£…å¤‡å¡ç‰‡500msæ˜¾ç¤ºè¯¦æƒ…å¡ç‰‡
  - ç‚¹å‡»å¤–éƒ¨æˆ–ç§»å¼€é¼ æ ‡å…³é—­è¯¦æƒ…å¡ç‰‡
- **æŸ¥çœ‹è®¤è¯å¯¹æ¯”**: åœ¨è¯¦æƒ…å¡ç‰‡ä¸­ç‚¹å‡»"è®¤è¯å¯¹æ¯”"æŒ‰é’®å±•å¼€ä¼˜åŠ¿/åŠ£åŠ¿/é€‚ç”¨åœºæ™¯

### è£…å¤‡æ§½ä½
ç³»ç»ŸåŒ…å«10ä¸ªè£…å¤‡æ§½ä½ï¼š
- **å¤´ç›”** (å¿…é€‰) - æœ€å¤š1ä»¶
- **å¤´å¥—** - æœ€å¤š1ä»¶
- **æ‰‹å¥—** - æœ€å¤š1ä»¶
- **èµ›è½¦æœ** - æœ€å¤š1ä»¶
- **æŠ¤è‚‹** (å¿…é€‰) - æœ€å¤š1ä»¶
- **èµ›è½¦é‹** - æœ€å¤š1ä»¶
- **é¥°å“1-4** - æ¯ä¸ªæœ€å¤š2ä»¶

### çŠ¶æ€æŒ‡ç¤º
- **å·²è£…é…è®¡æ•°**: æ˜¾ç¤º "å·²è£…é…: X/Y ä»¶è£…å¤‡"
- **å¿…é€‰æ§½ä½**: æ˜¾ç¤º "(å¿…é€‰: M/N)"
- **å®Œæ•´æ€§æŒ‡ç¤ºå™¨**: å½“æ‰€æœ‰å¿…é€‰æ§½ä½éƒ½è£…é…åæ˜¾ç¤ºç»¿è‰²âœ“

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

- **æ„å»ºå·¥å…·**: Vite 7.2.5 (Rolldown)
- **æ¡†æ¶**: React 18.x
- **è¯­è¨€**: TypeScript 5.x
- **æ ·å¼**: Tailwind CSS 4.x
- **æµ‹è¯•**: Vitest 4.x + Playwright
- **UIåº“**: @floating-ui/react (DetailCardå®šä½)
- **çŠ¶æ€ç®¡ç†**: React useState
- **å­˜å‚¨**: localStorage API

## ğŸ“ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”‚   â”œâ”€â”€ master-config.json  # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ character.png       # è§’è‰²å›¾ç‰‡
â”‚   â”œâ”€â”€ icons/             # è£…å¤‡å›¾æ ‡
â”‚   â””â”€â”€ images/            # è£…å¤‡å¤§å›¾
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ CharacterView.tsx
â”‚   â”‚   â”œâ”€â”€ EquipmentSlot.tsx
â”‚   â”‚   â”œâ”€â”€ EquipmentCard.tsx
â”‚   â”‚   â”œâ”€â”€ EquipmentLibrary.tsx
â”‚   â”‚   â”œâ”€â”€ StatusBar.tsx
â”‚   â”‚   â”œâ”€â”€ Toast.tsx
â”‚   â”‚   â””â”€â”€ DetailCard.tsx      # Phase 2: è£…å¤‡è¯¦æƒ…å¡ç‰‡
â”‚   â”œâ”€â”€ hooks/            # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”œâ”€â”€ useHover.ts         # Phase 2: Hoveräº¤äº’
â”‚   â”‚   â””â”€â”€ useLongPress.ts     # Phase 2: Long-pressäº¤äº’
â”‚   â”œâ”€â”€ services/          # æ ¸å¿ƒæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ compatibilityChecker.ts
â”‚   â”‚   â”œâ”€â”€ storageManager.ts
â”‚   â”‚   â””â”€â”€ dataProvider.ts
â”‚   â”œâ”€â”€ types/            # TypeScriptç±»å‹
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ constants/        # å¸¸é‡å®šä¹‰
â”‚   â”‚   â””â”€â”€ errorMessages.ts
â”‚   â”œâ”€â”€ App.tsx          # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â””â”€â”€ main.tsx         # å…¥å£æ–‡ä»¶
â”œâ”€â”€ e2e/                  # E2Eæµ‹è¯•
â”‚   â”œâ”€â”€ equipment-flow.spec.ts
â”‚   â”œâ”€â”€ detail-card.spec.ts
â”‚   â”œâ”€â”€ responsive.spec.ts
â”‚   â””â”€â”€ error-recovery.spec.ts
â”œâ”€â”€ .kiro/specs/         # é¡¹ç›®è§„èŒƒæ–‡æ¡£
â”œâ”€â”€ package.json
â”œâ”€â”€ playwright.config.ts  # Playwrighté…ç½®
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ README.md
```

## ğŸ¨ é…ç½®æ–‡ä»¶

ç³»ç»Ÿä½¿ç”¨ `public/master-config.json` ä½œä¸ºé…ç½®æ–‡ä»¶ï¼ŒåŒ…å«ï¼š
- **character**: è§’è‰²é…ç½®ï¼ˆå›¾ç‰‡ã€åç§°ï¼‰
- **slots**: 10ä¸ªè£…å¤‡æ§½ä½é…ç½®ï¼ˆä½ç½®ã€å°ºå¯¸ã€ç±»å‹ã€å®¹é‡ï¼‰
- **items**: è£…å¤‡æ•°æ®ï¼ˆè‡³å°‘12ä»¶ï¼‰
- **ui**: UIæ–‡æœ¬é…ç½®

### é…ç½®ç¤ºä¾‹
```json
{
  "character": {
    "image": "/character.png",
    "name": "èµ›è½¦æ‰‹"
  },
  "slots": [
    {
      "id": "helmet",
      "type": "å¤´ç›”",
      "displayName": "å¤´ç›”æ§½",
      "position": { "top": "8%", "left": "38%" },
      "size": { "width": "24%", "height": "24%" },
      "required": true,
      "maxCount": 1,
      "allowedTypes": ["å¤´ç›”"]
    }
  ],
  "items": [
    {
      "id": "helmet-001",
      "type": "å¤´ç›”",
      "brand": "Arai",
      "model": "GP-7RC",
      "displayName": "Arai GP-7RC ç¢³çº¤ç»´å¤´ç›”",
      "icon": "/icons/helmet-arai-gp7rc.png",
      "image": "/images/helmet-arai-gp7rc.png",
      "summary": "é¡¶çº§ç¢³çº¤ç»´èµ›è½¦å¤´ç›”",
      "specs": {
        "weight_g": 1350,
        "vents": 8,
        "certs": ["FIA 8860-2018"]
      },
      "certComparison": "FIA 8860-2018æ˜¯æœ€æ–°æ ‡å‡†...",
      "advantages": ["åŒé‡è®¤è¯", "è½»é‡åŒ–"],
      "disadvantages": ["ä»·æ ¼è¾ƒé«˜"],
      "applicableScenarios": "é€‚ç”¨äºæ‰€æœ‰çº§åˆ«èµ›è½¦è¿åŠ¨"
    }
  ]
}
```

## ğŸ§ª æµ‹è¯•

### å•å…ƒæµ‹è¯•
```bash
npm test
```

å·²å®ç°æµ‹è¯•ï¼š
- CompatibilityChecker: 13ä¸ªæµ‹è¯•
- StorageManager: 15ä¸ªæµ‹è¯•
- DataProvider: 15ä¸ªæµ‹è¯•
- Toast: 9ä¸ªæµ‹è¯•
- StatusBar: 12ä¸ªæµ‹è¯•
- EquipmentCard: 7ä¸ªæµ‹è¯•
- EquipmentSlot: 16ä¸ªæµ‹è¯•
- EquipmentLibrary: 8ä¸ªæµ‹è¯•
- CharacterView: 13ä¸ªæµ‹è¯•
- **æ€»è®¡**: 120ä¸ªå•å…ƒæµ‹è¯• âœ…

### E2Eæµ‹è¯•
```bash
npm run test:e2e
```

å·²å®ç°æµ‹è¯•ï¼š
- Equipment Flow: 10ä¸ªæµ‹è¯•
- DetailCard: 6ä¸ªæµ‹è¯•
- Responsive: 5ä¸ªæµ‹è¯•
- Error Recovery: 6ä¸ªæµ‹è¯•
- **æ€»è®¡**: 27ä¸ªE2Eæµ‹è¯•

### æµ‹è¯•è¦†ç›–
- æ ¸å¿ƒæœåŠ¡: 100%
- UIç»„ä»¶: 100%
- ä¸šåŠ¡é€»è¾‘: å®Œæ•´è¦†ç›–
- è¾¹ç•Œæƒ…å†µ: å·²æµ‹è¯•
- E2Eåœºæ™¯: æ ¸å¿ƒæµç¨‹è¦†ç›–

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°è£…å¤‡
1. åœ¨ `public/master-config.json` çš„ `items` æ•°ç»„ä¸­æ·»åŠ è£…å¤‡æ•°æ®
2. å‡†å¤‡è£…å¤‡å›¾æ ‡ï¼ˆ64x64ï¼‰å’Œå¤§å›¾ï¼ˆ200x200ï¼‰
3. ç¡®ä¿ `type` å­—æ®µä¸æ§½ä½çš„ `allowedTypes` åŒ¹é…

### ä¿®æ”¹æ§½ä½é…ç½®
1. ç¼–è¾‘ `public/master-config.json` çš„ `slots` æ•°ç»„
2. è°ƒæ•´ `position` å’Œ `size`ï¼ˆä½¿ç”¨ç™¾åˆ†æ¯”ï¼‰
3. è®¾ç½® `required`ã€`maxCount`ã€`allowedTypes`

### æ‰©å±•åŠŸèƒ½
- å‚è€ƒ `.kiro/specs/racing-equipment-config/design.md` äº†è§£æ¶æ„è®¾è®¡
- å‚è€ƒ `.kiro/specs/racing-equipment-config/requirements.md` äº†è§£éœ€æ±‚è§„èŒƒ
- å‚è€ƒ `.kiro/specs/racing-equipment-config/tasks.md` äº†è§£å®ç°è®¡åˆ’

## ğŸ® äº¤äº’ç‰¹æ€§

### è§†è§‰åé¦ˆ
- **è£…å¤‡å¡ç‰‡**
  - é€‰ä¸­çŠ¶æ€: è“è‰²è¾¹æ¡† + é˜´å½±
  - æ‹–æ‹½çŠ¶æ€: åŠé€æ˜(50%) + ç¼©å°(95%)
  - é¼ æ ‡æ ·å¼: grab/grabbing
  
- **è£…å¤‡æ§½ä½**
  - ç©ºæ§½ä½: ç°è‰²è¾¹æ¡†
  - å·²è£…é…: è“è‰²è¾¹æ¡†
  - å…¼å®¹é«˜äº®: ç»¿è‰²è¾¹æ¡† + å…‰ç¯
  - æ‹–æ‹½æ‚¬åœ: é»„è‰²è¾¹æ¡† + å…‰ç¯ + æ”¾å¤§(105%)
  - ä¸å…¼å®¹: ç°è‰² + é™ä½é€æ˜åº¦

### å“åº”å¼è®¾è®¡
- **æ¡Œé¢ç«¯** (â‰¥768px): å·¦å³åˆ†æ å¸ƒå±€
- **ç§»åŠ¨ç«¯** (<768px): å‚ç›´å †å å¸ƒå±€
- **è£…å¤‡å›¾æ ‡**: 90-110pxå“åº”å¼å°ºå¯¸

## ğŸ› å·²çŸ¥é—®é¢˜

### å½“å‰ç‰ˆæœ¬ï¼ˆPhase 2å®Œæˆï¼‰
- ä½¿ç”¨å ä½å›¾ç‰‡ï¼ˆSVGï¼‰ï¼Œå»ºè®®æ›¿æ¢ä¸ºçœŸå®çš„åƒç´ é£æ ¼å›¾ç‰‡
- E2Eæµ‹è¯•éœ€è¦å®‰è£…webkitæµè§ˆå™¨ä»¥è¿è¡Œæ‰€æœ‰ç§»åŠ¨ç«¯æµ‹è¯•

### æœªæ¥æ”¹è¿›ï¼ˆPhase 3ï¼‰
- æ·»åŠ è£…å¤‡å¯¹æ¯”åŠŸèƒ½
- æ·»åŠ è£…å¤‡æœç´¢å’Œè¿‡æ»¤
- æ·»åŠ è£…å¤‡æ”¶è—åŠŸèƒ½
- æ€§èƒ½ä¼˜åŒ–å’Œæ‰“åŒ…ä¼˜åŒ–

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä¸ºæ¼”ç¤ºé¡¹ç›®ï¼Œç”¨äºå±•ç¤ºèµ›è½¦æ‰‹è£…å¤‡é…ç½®ç³»ç»Ÿçš„å®ç°ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä½¿ç”¨æœ¬ç³»ç»Ÿï¼å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åé¦ˆã€‚

---

**é¡¹ç›®çŠ¶æ€**: âœ… Phase 2 å®Œæˆ  
**ç‰ˆæœ¬**: 2.0.0  
**æœ€åæ›´æ–°**: 2026å¹´1æœˆ21æ—¥
