# Phase 2 å¯åŠ¨æ–‡æ¡£

## ğŸ¯ Phase 2 ç›®æ ‡

Phase 2çš„ç›®æ ‡æ˜¯å®ç°è£…å¤‡è¯¦æƒ…å±•ç¤ºåŠŸèƒ½ï¼ŒåŒ…æ‹¬æ¡Œé¢ç«¯hoverå’Œç§»åŠ¨ç«¯long-pressäº¤äº’ï¼Œä»¥åŠè®¤è¯å¯¹æ¯”UIå’Œå®Œæ•´çš„E2Eæµ‹è¯•ã€‚

## ğŸ“‹ Phase 2 ä»»åŠ¡æ¸…å•

### Task 14: DetailCardå’Œè£…å¤‡è¯¦æƒ…

#### 14.1 å®ç°DetailCardç»„ä»¶
**ä¼˜å…ˆçº§**: é«˜  
**é¢„è®¡æ—¶é—´**: 4-6å°æ—¶

**éœ€æ±‚**:
- ä½¿ç”¨Floating UIå®ç°å®šä½
  - æ¡Œé¢ç«¯ï¼švirtual elementè·Ÿéšé¼ æ ‡
  - ç§»åŠ¨ç«¯ï¼šfixed anchoré”šå®šåœ¨è§¦ç‚¹ä¸Šæ–¹20px
- å®ç°flip middlewareå¤„ç†è¾¹ç•Œæº¢å‡º
- æ˜¾ç¤ºè£…å¤‡å®Œæ•´ä¿¡æ¯ï¼š
  - brandï¼ˆå“ç‰Œï¼‰
  - modelï¼ˆå‹å·ï¼‰
  - summaryï¼ˆç®€ä»‹ï¼‰
  - specsï¼ˆè§„æ ¼ï¼‰ï¼šweight_g, vents, certs
- é¢„ç•™Phase 2 UIåŒºå—ï¼ˆcertsä¸‹æ–¹æŠ˜å åŒº/Tabï¼‰
- ä½¿ç”¨requestAnimationFrameèŠ‚æµä½ç½®æ›´æ–°

**æŠ€æœ¯æ ˆ**:
- `@floating-ui/react` æˆ– `@floating-ui/dom`
- React Portal
- CSSåŠ¨ç”»

**éªŒæ”¶æ ‡å‡†**:
- DetailCardæ­£ç¡®æ˜¾ç¤º
- å®šä½æ­£ç¡®ï¼ˆæ¡Œé¢/ç§»åŠ¨ç«¯ï¼‰
- è¾¹ç•Œå¤„ç†æ­£å¸¸
- æ€§èƒ½è‰¯å¥½ï¼ˆæ— å¡é¡¿ï¼‰

#### 14.2 å®ç°hoveräº¤äº’ï¼ˆæ¡Œé¢ç«¯ï¼‰
**ä¼˜å…ˆçº§**: é«˜  
**é¢„è®¡æ—¶é—´**: 2-3å°æ—¶

**éœ€æ±‚**:
- åˆ›å»º`src/hooks/useHover.ts`
  - å»¶è¿Ÿ200-250msæ˜¾ç¤º
  - é¼ æ ‡ç§»å¼€ç«‹å³éšè—
- é›†æˆåˆ°EquipmentCardç»„ä»¶
- DetailCardè·Ÿéšé¼ æ ‡ç§»åŠ¨
- å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»

**æŠ€æœ¯å®ç°**:
```typescript
interface UseHoverOptions {
  delay?: number; // é»˜è®¤200ms
  onHoverStart?: () => void;
  onHoverEnd?: () => void;
}

function useHover(options: UseHoverOptions) {
  // å®ç°hoveré€»è¾‘
}
```

**éªŒæ”¶æ ‡å‡†**:
- hoveræ˜¾ç¤ºDetailCard
- ç§»å¼€éšè—
- å»¶è¿Ÿæ—¶é—´æ­£ç¡®
- æ— é—ªçƒ

#### 14.3 å®ç°long-pressäº¤äº’ï¼ˆç§»åŠ¨ç«¯ï¼‰
**ä¼˜å…ˆçº§**: é«˜  
**é¢„è®¡æ—¶é—´**: 2-3å°æ—¶

**éœ€æ±‚**:
- åˆ›å»º`src/hooks/useLongPress.ts`
  - 500msè§¦å‘long-press
  - ç§»åŠ¨è¶…è¿‡10pxå–æ¶ˆ
- é›†æˆåˆ°EquipmentCardå’ŒEquipmentSlotç»„ä»¶
- DetailCardé”šå®šåœ¨è§¦ç‚¹ä¸Šæ–¹20px
- ç‚¹å‡»å¤–éƒ¨å…³é—­

**æŠ€æœ¯å®ç°**:
```typescript
interface UseLongPressOptions {
  delay?: number; // é»˜è®¤500ms
  moveThreshold?: number; // é»˜è®¤10px
  onLongPress?: (event: TouchEvent) => void;
  onCancel?: () => void;
}

function useLongPress(options: UseLongPressOptions) {
  // å®ç°long-pressé€»è¾‘
}
```

**éªŒæ”¶æ ‡å‡†**:
- long-pressæ˜¾ç¤ºDetailCard
- ç‚¹å‡»å¤–éƒ¨å…³é—­
- ç§»åŠ¨å–æ¶ˆæ­£å¸¸
- è§¦æ‘¸åé¦ˆè‰¯å¥½

#### 14.4 DetailCard Propertyæµ‹è¯•
**ä¼˜å…ˆçº§**: ä¸­  
**é¢„è®¡æ—¶é—´**: 2-3å°æ—¶

**æµ‹è¯•å†…å®¹**:
- **Property 25**: Detail Card Hover Delay
  - éªŒè¯hoverå»¶è¿Ÿæ—¶é—´åœ¨200-250msèŒƒå›´å†…
- **Property 26**: Detail Card Positioning
  - éªŒè¯DetailCardå®šä½æ­£ç¡®
  - éªŒè¯è¾¹ç•Œå¤„ç†
- **Property 27**: Long Press Detection
  - éªŒè¯long-pressè§¦å‘æ—¶é—´
  - éªŒè¯ç§»åŠ¨å–æ¶ˆé€»è¾‘

### Task 15: è®¤è¯å¯¹æ¯”å’ŒPhase 2å­—æ®µ

#### 15.1 æ‰©å±•EquipmentItemç±»å‹
**ä¼˜å…ˆçº§**: ä¸­  
**é¢„è®¡æ—¶é—´**: 1å°æ—¶

**éœ€æ±‚**:
- æ·»åŠ Phase 2å­—æ®µåˆ°`src/types/index.ts`:
  ```typescript
  interface EquipmentItem {
    // ... ç°æœ‰å­—æ®µ
    certComparison?: string; // è®¤è¯å¯¹æ¯”è¯´æ˜
    advantages?: string[];   // ä¼˜åŠ¿åˆ—è¡¨
    disadvantages?: string[]; // åŠ£åŠ¿åˆ—è¡¨
    applicableScenarios?: string; // é€‚ç”¨åœºæ™¯
  }
  ```

#### 15.2 å®ç°è®¤è¯å¯¹æ¯”UI
**ä¼˜å…ˆçº§**: ä¸­  
**é¢„è®¡æ—¶é—´**: 2-3å°æ—¶

**éœ€æ±‚**:
- åœ¨DetailCardçš„certsä¸‹æ–¹æ·»åŠ æŠ˜å åŒºæˆ–Tab
- æ˜¾ç¤ºç®€æ˜è¦ç‚¹åˆ—è¡¨ + ä¸€å¥è¯ç»“è®º
- ä¸æ˜¾ç¤ºé•¿æ–‡ï¼Œä¿æŒç®€æ´
- åƒç´ é£æ ¼è®¾è®¡

**UIè®¾è®¡**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Arai GP-7RC                 â”‚
â”‚ é¡¶çº§ç¢³çº¤ç»´èµ›è½¦å¤´ç›”          â”‚
â”‚                             â”‚
â”‚ è§„æ ¼:                       â”‚
â”‚ â€¢ é‡é‡: 1350g               â”‚
â”‚ â€¢ é€šé£å£: 8ä¸ª               â”‚
â”‚ â€¢ è®¤è¯: FIA 8860-2018       â”‚
â”‚                             â”‚
â”‚ [è®¤è¯å¯¹æ¯” â–¼]                â”‚
â”‚ â€¢ ä¼˜åŠ¿: ...                 â”‚
â”‚ â€¢ åŠ£åŠ¿: ...                 â”‚
â”‚ â€¢ é€‚ç”¨: ...                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 15.3 æ›´æ–°é…ç½®æ–‡ä»¶
**ä¼˜å…ˆçº§**: ä½  
**é¢„è®¡æ—¶é—´**: 1å°æ—¶

**éœ€æ±‚**:
- ä¸ºéƒ¨åˆ†è£…å¤‡æ·»åŠ Phase 2å­—æ®µæ•°æ®
- éªŒè¯æ•°æ®ç»“æ„æ­£ç¡®
- æ›´æ–°ç¤ºä¾‹æ•°æ®

### Task 16: å®Œæ•´E2Eæµ‹è¯•

#### 16.1 E2Eæµ‹è¯•ï¼šå®Œæ•´ç”¨æˆ·æµç¨‹
**ä¼˜å…ˆçº§**: ä¸­  
**é¢„è®¡æ—¶é—´**: 4-5å°æ—¶

**éœ€æ±‚**:
- ä½¿ç”¨Playwrightæˆ–Cypress
- æµ‹è¯•åœºæ™¯ï¼š
  1. æ‰“å¼€åº”ç”¨ â†’ é€‰æ‹©è£…å¤‡ â†’ è£…é… â†’ æŸ¥çœ‹è¯¦æƒ… â†’ å¸è½½ â†’ é‡ç½®
  2. ç§»åŠ¨ç«¯long-pressæµç¨‹
  3. å“åº”å¼å¸ƒå±€åˆ‡æ¢

**æµ‹è¯•æ–‡ä»¶ç»“æ„**:
```
e2e/
â”œâ”€â”€ equipment-flow.spec.ts      # è£…å¤‡æµç¨‹æµ‹è¯•
â”œâ”€â”€ detail-card.spec.ts         # DetailCardæµ‹è¯•
â”œâ”€â”€ responsive.spec.ts          # å“åº”å¼æµ‹è¯•
â””â”€â”€ fixtures/                   # æµ‹è¯•æ•°æ®
```

#### 16.2 E2Eæµ‹è¯•ï¼šé”™è¯¯æ¢å¤
**ä¼˜å…ˆçº§**: ä½  
**é¢„è®¡æ—¶é—´**: 2-3å°æ—¶

**éœ€æ±‚**:
- æµ‹è¯•ç½‘ç»œé”™è¯¯æ¢å¤
- æµ‹è¯•localStorageæ»¡çš„æƒ…å†µ
- æµ‹è¯•é…ç½®åŠ è½½å¤±è´¥

## ğŸ“¦ éœ€è¦å®‰è£…çš„ä¾èµ–

### Floating UI
```bash
npm install @floating-ui/react
# æˆ–
npm install @floating-ui/dom
```

### E2Eæµ‹è¯•æ¡†æ¶ï¼ˆäºŒé€‰ä¸€ï¼‰
```bash
# Playwright
npm install -D @playwright/test

# æˆ– Cypress
npm install -D cypress
```

## ğŸ¨ è®¾è®¡è§„èŒƒ

### DetailCardæ ·å¼
- **èƒŒæ™¯**: ç™½è‰²
- **è¾¹æ¡†**: 2pxé»‘è‰²
- **é˜´å½±**: `shadow-[3px_3px_0px_0px_rgba(0,0,0,1)]`
- **æœ€å¤§å®½åº¦**: 300px
- **å†…è¾¹è·**: 16px
- **å­—ä½“**: ä¸ä¸»åº”ç”¨ä¸€è‡´

### åŠ¨ç”»
- **æ·¡å…¥**: `fade-in duration-200`
- **æ»‘å…¥**: `slide-in-from-bottom-2 duration-200`
- **é€€å‡º**: `fade-out duration-150`

### å“åº”å¼
- **æ¡Œé¢ç«¯**: è·Ÿéšé¼ æ ‡ï¼Œæœ€å¤§å®½åº¦300px
- **ç§»åŠ¨ç«¯**: å›ºå®šåœ¨è§¦ç‚¹ä¸Šæ–¹ï¼Œæœ€å¤§å®½åº¦90vw

## ğŸ“Š å®æ–½è®¡åˆ’

### Week 1: DetailCardæ ¸å¿ƒåŠŸèƒ½
- Day 1-2: Task 14.1 - DetailCardç»„ä»¶
- Day 3: Task 14.2 - Hoveräº¤äº’
- Day 4: Task 14.3 - Long-pressäº¤äº’
- Day 5: Task 14.4 - Propertyæµ‹è¯•

### Week 2: è®¤è¯å¯¹æ¯”å’ŒE2Eæµ‹è¯•
- Day 1: Task 15.1-15.2 - è®¤è¯å¯¹æ¯”UI
- Day 2: Task 15.3 - æ›´æ–°é…ç½®
- Day 3-4: Task 16.1 - E2Eæµ‹è¯•
- Day 5: Task 16.2 - é”™è¯¯æ¢å¤æµ‹è¯•

## âœ… éªŒæ”¶æ ‡å‡†

### Phase 2å®Œæˆæ ‡å‡†
- [ ] DetailCardåŠŸèƒ½å®Œæ•´ï¼ˆæ¡Œé¢hover/ç§»åŠ¨long-pressï¼‰
- [ ] è®¤è¯å¯¹æ¯”UIå®Œå–„
- [ ] E2Eæµ‹è¯•è¦†ç›–å®Œæ•´
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£æ›´æ–°å®Œæ•´
- [ ] ä»£ç è´¨é‡ä¿æŒä¼˜ç§€

### è´¨é‡æŒ‡æ ‡
- [ ] 0 ESLint errors
- [ ] 0 TypeScript errors
- [ ] æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] æ‰€æœ‰E2Eæµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½è‰¯å¥½ï¼ˆæ— å¡é¡¿ï¼‰

## ğŸš€ å¼€å§‹Phase 2

### å‡†å¤‡å·¥ä½œ
1. âœ… Phase 1å®Œæˆæ€»ç»“
2. âœ… Phase 2å¯åŠ¨æ–‡æ¡£
3. [ ] å®‰è£…Floating UI
4. [ ] å®‰è£…E2Eæµ‹è¯•æ¡†æ¶
5. [ ] åˆ›å»ºPhase 2åˆ†æ”¯ï¼ˆå¯é€‰ï¼‰

### ç¬¬ä¸€æ­¥
ä»Task 14.1å¼€å§‹ï¼šå®ç°DetailCardç»„ä»¶

**å»ºè®®é¡ºåº**:
1. å®‰è£…`@floating-ui/react`
2. åˆ›å»º`src/components/DetailCard.tsx`
3. å®ç°åŸºç¡€å¸ƒå±€å’Œæ ·å¼
4. é›†æˆFloating UIå®šä½
5. æµ‹è¯•æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯

---

**æ–‡æ¡£åˆ›å»ºæ—¶é—´**: 2026-01-21  
**Phase 2é¢„è®¡å¼€å§‹**: å‡†å¤‡å°±ç»ª  
**çŠ¶æ€**: âœ… å‡†å¤‡å¼€å§‹Phase 2
